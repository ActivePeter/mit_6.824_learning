[6.824 Lab 1: MapReduce (mit.edu)](https://pdos.csail.mit.edu/6.824/labs/lab-mr.html)



## mapreduce（分布式计算

### program design

- debug output

  - **err:** log.fatal
  - **common:** log.print

- file name

  - intemediate file

    - ```
      filename := intermediate_file_pre +
         "_" + strconv.Itoa(map_id) +
         "_" + strconv.Itoa(ihash(kv.Key)%n_reduce)
      ```

  - output

    - 

- structure

  - Task

    - ```
      task_key  int
      task_type TaskType
      task_strs  string[] 
      ```

      map task will handle one file (the original file)

      reduce task will handle multiple files (the files generated by map tasks)

- process

  - 1.make cordinator

  - 2.workers init, request for task

  - 3.cordinator RequestTask_handler

    - ```
      maptask := c.take_one_map_task()
      ```

    - 1.if maptask != nil {}//send a map task

    - 2.if c.map_tasks.is_all_done() {

    - 3 else 

      - no unhandled maptask, exist map task handling

  - 4.

